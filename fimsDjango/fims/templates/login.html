<!DOCTYPE html>
{% load static %}
<html>

<head>
    <title>HTML Login Form</title>
    <link rel="stylesheet" href="{% static 'fims/css/login.css' %}">
</head>

<body>
    <div class="main">
        <h1>Family Info Management System</h1>
        <h3>Enter your login credentials</h3>

    <form id="loginForm" action="" name="login_view" method="post">
            {% csrf_token %}
            <label for="first">
                Username:
            </label>
            <input type="text" id="first" name="username" placeholder="Enter your Username">
            <div id="usernameError" class="error-message"></div>

            <label for="password">
                Password:
            </label>
            <input type="password" id="password" name="password" placeholder="Enter your Password">
            <div id="passwordError" class="error-message"></div>

            <div class="wrap">
                <button type="submit">
                    Submit
                </button>
            </div>
        </form>
        <style>
            .error-message {
                color: red;
                font-size: 0.95em;
                margin-bottom: 8px;
            }

            .input-error {
                border: 2px solid red !important;
            }
        </style>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const form = document.getElementById('loginForm');
                const username = document.getElementById('first');
                const password = document.getElementById('password');
                const usernameError = document.getElementById('usernameError');
                const passwordError = document.getElementById('passwordError');

                form.addEventListener('submit', function (e) {
                    let valid = true;
                    usernameError.textContent = '';
                    passwordError.textContent = '';
                    username.classList.remove('input-error');
                    password.classList.remove('input-error');

                    if (!username.value.trim()) {
                        usernameError.textContent = 'Username is required';
                        username.classList.add('input-error');
                        valid = false;
                    }
                    if (!password.value.trim()) {
                        passwordError.textContent = 'Password is required';
                        password.classList.add('input-error');
                        valid = false;
                    }

                    if (!valid) {
                        e.preventDefault();
                        return;
                    }
                });

                // Show server-side error for wrong password (if present)
                {% if error_message %}
                passwordError.textContent = '{{ error_message }}';
                password.classList.add('input-error');
                {% endif %}
            });
        </script>

    </div>
</body>
<script>

</script>

</html>