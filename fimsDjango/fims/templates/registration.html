<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Family Registration</title>
    <link rel="stylesheet" href="{% static 'fims/css/registration.css' %}">
    <script src="{% static 'fims/js/registration.js' %}" defer></script>
</head>
<body>
    <h1>Register Family</h1>

    <form method="post" enctype="multipart/form-data" id="registrationForm">
        {% csrf_token %}

        <!-- Family Head Section -->
        <fieldset>
            <legend>Family Head</legend>
            <table class="form-table">
                <tr>
                    <td><label for="head_name">First Name:</label></td>
                    <td><input type="text" name="head_name" placeholder="First Name" required maxlength="50"></td>
                </tr>
                <tr>
                    <td><label for="head_surname">Surname:</label></td>
                    <td><input type="text" name="head_surname" placeholder="Surname" required maxlength="50"></td>
                </tr>
                <tr>
                    <td><label for="head_birthdate">Birthdate:</label></td>
                    <td><input type="date" name="head_birthdate" required></td>
                </tr>
                <tr>
                    <td><label for="head_mobile">Mobile No:</label></td>
                    <td><input type="text" name="head_mobile" placeholder="Mobile No" required maxlength="10"></td>
                </tr>
                <tr>
                    <td><label for="head_address">Address:</label></td>
                    <td><textarea name="head_address" placeholder="Address" required></textarea></td>
                </tr>
                <tr>
                    <td><label for="head_state">State:</label></td>
                    <td>
                        <select name="head_state" id="head_state" required>
                            <option value="">Select State</option>
                            {% for state in states %}
                                <option value="{{ state.id }}">{{ state.name }}</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><label for="head_city">City:</label></td>
                    <td>
                        <select name="head_city" id="head_city" required>
                            <option value="">Select City</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><label for="head_pincode">Pincode:</label></td>
                    <td><input type="text" name="head_pincode" placeholder="Pincode" required maxlength="6"></td>
                </tr>
                <tr>
                    <td>Marital Status:</td>
                    <td>
                        <label><input type="radio" name="head_marital_status" value="Married" required> Married</label>
                        <label><input type="radio" name="head_marital_status" value="Unmarried"> Unmarried</label>
                    </td>
                </tr>
                <tr id="wedding_date_row" style="display:none;">
                    <td><label for="head_wedding_date">Wedding Date:</label></td>
                    <td><input type="date" name="head_wedding_date" id="wedding_date"></td>
                </tr>
                <tr>
                    <td><label for="head_education">Education:</label></td>
                    <td>
                        <select name="head_education" id="head_education" required>
                            <option value="Graduate">Graduate</option>
                            <option value="Post Graduate">Post Graduate</option>
                            <option value="Diploma">Diploma</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><label for="head_photo">Upload Photo:</label></td>
                    <td><input type="file" name="head_photo" accept="image/png, image/jpeg" required></td>
                </tr>
                <tr>
                    <td>Hobbies:</td>
                    <td>
                        <div id="hobbies-section">
                            <button type="button" class="secondary" onclick="addHobby()">+ Add Hobby</button>
                            <input type="text" name="head_hobbies[]" required placeholder="Enter a hobby">
                            
                        </div>
                    </td>
                </tr>
            </table>
        </fieldset>

        <!-- Family Members Section -->
        <div id="members-container">
            <h3>Family Members</h3>
            <!-- Members appended here -->
        </div>

        <button type="button" class="secondary" onclick="addMember()">+ Add Member</button>

        <div class="form-actions">
            <button type="submit" class="primary">Submit</button>
        </div>
    </form>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
{{ states|json_script:"states-data" }}
<script>
    window.statesForMembers = JSON.parse(document.getElementById('states-data').textContent);
</script>
<script src="{% static 'fims/js/registration.js' %}"></script>
</html>
