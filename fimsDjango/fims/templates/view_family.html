{% extends 'dashboard_base.html' %}
{% load static %}
{% block title %}View Family{% endblock %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'fims/css/view_family.css' %}">
{% endblock %}

{% block content %}

<div class="export-back-row">
    <a href="{% url 'dashboard' %}" class="back-btn" style="margin-right:auto;">&larr; Back to Dashboard</a>
    <div class="export-buttons" style="justify-content:flex-start;">
        <a href="{% url 'update_head' head.HeadID %}" class="btn btn-blue">Edit Details</a>
            <a href="{% url 'pdf_view' %}?id={{ head.HeadID }}" class="btn btn-yellow">Export PDF</a>
            <a href="{% url 'excel_view' %}?id={{ head.HeadID }}" class="btn btn-green">Export Excel</a>
    </div>
</div>
<br><br>

<h2 id="head_details">Head Details:</h2>
<br>
<table class="table table-bordered" style="width:100%; max-width:900px; margin:0 auto 2rem auto; background:#fff;">
    {% if head.Photo %}
    <tr>
        <td colspan="3" style="text-align:center; padding:18px 0 10px 0; background:#f8fafc;">
            <img src="{{ head.Photo.url }}" alt="Head Photo" style="max-width:150px; max-height:180px; border-radius:8px; box-shadow:0 2px 8px #ccc;">
        </td>
    </tr>
    {% endif %}
    <tr>
        <th>Name</th>
        <td colspan="2">{{ head.Name }} {{ head.Surname }}</td>
    </tr>
    <tr><th>Birthdate</th><td>{{ head.Birthdate }}</td></tr>
    <tr><th>Gender</th><td>{{ head.Gender }}</td></tr>
    <tr><th>Mobile</th><td>{{ head.MobileNo }}</td></tr>
    <tr><th>Education</th><td>{{ head.Education }}</td></tr>
    <tr><th>Address</th><td>{{ head.Address }}</td></tr>
    <tr><th>State</th><td>{{ state_name }}</td></tr>
    <tr><th>City</th><td>{{ city_name }}</td></tr>
    <tr><th>Pincode</th><td>{{ head.Pincode }}</td></tr>
    <tr><th>Marital Status</th><td>{{ head.MaritalStatus }}</td></tr>
    <tr><th>Wedding Date</th><td>{{ head.WeddingDate }}</td></tr>
    <tr><th>Hobbies</th><td colspan="2">
        {% for hobby in head.head_hobbies.all %}
            {{ hobby.Hobby }}{% if not forloop.last %}, {% endif %}
        {% empty %}None{% endfor %}
    </td></tr>
</table>


<h2 class="family-title">Family Members</h2>
<table class="table table-bordered" style="width:100%; max-width:900px; margin:0 auto 2rem auto; background:#fff;">
    <thead>
        <tr>
            <th>Photo</th>
            <th>Name</th>
            <th>Birthdate</th>
            <th>Gender</th>
            <th>Mobile</th>
            <th>Education</th>
            
            <th>Marital Status</th>
            <th>Wedding Date</th>
        </tr>
    </thead>
    <tbody>
        {% for member in members %}
                <tr>
                        <td style="text-align:center;">
                                {% if member.Photo %}
                                        <img src="{{ member.Photo.url }}" alt="Member Photo" style="max-width:70px; max-height:90px; border-radius:6px; box-shadow:0 1px 4px #ccc;">
                                {% endif %}
                        </td>
                        <td>{% if member.Name or member.Surname %}{{ member.Name }} {{ member.Surname }}{% else %}-{% endif %}</td>
                        <td>{% if member.Birthdate %}{{ member.Birthdate }}{% else %}-{% endif %}</td>
                        <td>{% if member.Gender %}{{ member.Gender }}{% else %}-{% endif %}</td>
                        <td>{% if member.MobileNo %}{{ member.MobileNo }}{% else %}-{% endif %}</td>
                        <td>{% if member.Education %}{{ member.Education }}{% else %}-{% endif %}</td>
                        <td>{% if member.MaritalStatus %}{{ member.MaritalStatus }}{% else %}-{% endif %}</td>
                        <td>{% if member.WeddingDate %}{{ member.WeddingDate }}{% else %}Not Married{% endif %}</td>
                       
                </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
