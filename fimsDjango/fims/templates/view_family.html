{% extends 'dashboard_base.html' %}
{% load static %}
{% block title %}View Family{% endblock %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'fims/css/view_family.css' %}">
{% endblock %}

{% block content %}


   <div class="export-back-row">
    <div class="export-buttons" style="justify-content:flex-start;">
        <a href="{% url 'pdf_view' %}?id={{ head.HeadID }}" class="btn btn-green">Export PDF</a>
        <a href="#" class="btn btn-blue">Export Excel</a>
    </div>
    <a href="{% url 'dashboard' %}" class="back-btn" style="margin-left:auto;">&larr; Back to Dashboard</a>
</div>

<!-- Head Table -->
<div class="head-table">
    <div class="head-row">
        <div class="head-info">
            <p><strong>Name:</strong> {{ head.Name }} {{ head.Surname }}</p>
            <p><strong>Birthdate:</strong> {{ head.Birthdate }}</p>
            <p><strong>Gender:</strong> {{ head.Gender }}</p>
        </div>
        
        <div class="head-photo-container">
            {% if head.Photo %}
            <img src="{{ head.Photo.url }}" alt="Head Photo" class="head-photo">
            {% endif %}
        </div>
    </div>

    <div class="head-row">
        <p><strong>Mobile:</strong> {{ head.MobileNo }}</p>
        <p><strong>Education:</strong> {{ head.Education }}</p>
    </div>

    <div class="head-row">
        <p><strong>Address:</strong> {{ head.Address }}</p>
    </div>
    <div class="head-row">
        <p><strong>State:</strong> {{ head.State }}</p>
        <p><strong>City:</strong>  {{ head.City }}</p>
        <p><strong>Pincode:</strong> {{ head.Pincode }}</p>
    </div>

    <div class="head-row">
        <p><strong>Marital Status:</strong> {{ head.MaritalStatus }}</p>
        <p><strong>Wedding Date:</strong> {{ head.WeddingDate }}</p>
    </div>

    <div class="head-row">
        <p><strong>Hobbies:</strong> 
            {% for hobby in head.head_hobbies.all %}
                {{ hobby.Hobby }}{% if not forloop.last %}, {% endif %}
            {% empty %}None{% endfor %}
        </p>
    </div>
</div>

<!-- Family Members Grid -->
<h2 class="family-title">Family Members</h2>
<div class="family-grid">
    {% for member in members %}
    <div class="member-table">
        <div class="member-row">
            <div class="member-info">
                <p><strong>Name:</strong> {{ member.Name }} {{ member.Surname }}</p>
                <p><strong>Birthdate:</strong> {{ member.Birthdate }}</p>
                <p><strong>Gender:</strong> {{ member.Gender }}</p>
            </div>
            <div class="member-photo-container">
                {% if member.Photo %}
                <img src="{{ member.Photo.url }}" alt="Member Photo" class="member-photo">
                {% endif %}
            </div>
        </div>

        <div class="member-row">
            <p><strong>Mobile:</strong> {{ member.MobileNo }}</p>
            <p><strong>Education:</strong> {{ member.Education }}</p>
        </div>

        <div class="member-row">
            <p><strong>Address:</strong> {{ member.Address }}</p>
            <p><strong>State/City/Pincode:</strong> {{ member.State }}, {{ member.City }}, {{ member.Pincode }}</p>
        </div>

        <div class="member-row">
            <p><strong>Marital Status:</strong> {{ member.MaritalStatus }}</p>
            <p><strong>Wedding Date:</strong> {{ member.WeddingDate }}</p>
        </div>

        <div class="member-row">
            <p><strong>Hobbies:</strong> 
                {% for hobby in member.member_hobbies.all %}
                    {{ hobby.Hobby }}{% if not forloop.last %}, {% endif %}
                {% empty %}None{% endfor %}
            </p>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}
